FROM kalilinux/kali-rolling:latest

RUN apt-get update
RUN apt-get install -y nmap netcat git neovim nginx curl wget golang gcc g++ apt-transport-https python3 python3-pip 
RUN apt-get install -y zsh zsh-syntax-highlighting zsh-autosuggestions
RUN apt-get install -y exploitdb radare2 gobuster ffuf smbmap sqlmap crackmapexec tshark
RUN apt-get install -y powershell-empire metasploit-framework shellter veil unicorn-magic impacket-scripts python2 wordlists

RUN apt install -y apt-transport-https dirmngr gnupg ca-certificates
RUN apt install -y apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF
RUN echo deb https://download.mono-project.com/repo/debian stable-buster main"" | sudo tee /etc/apt/sources.list.d/mono-official-stable.list"
RUN apt update
RUN apt install -y mono-devel

RUN cp /etc/skel/.zshrc /root/
RUN chsh -s /bin/zsh

RUN mkdir /opt/git
WORKDIR /opt/git
RUN git clone --recurse https://github.com/samratashok/nishang.git  &&\
    git clone --recurse https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite  && \
    git clone --recurse https://github.com/SecureAuthCorp/impacket.git &&\
    git clone --recurse https://github.com/bats3c/shad0w.git &&\
    git clone --recurse https://github.com/danielmiessler/SecLists.git &&\
    git clone --recurse https://github.com/lgandx/Responder.git &&\
    git clone --recurse https://github.com/sherlock-project/sherlock.git &&\
    git clone --recurse https://github.com/PowerShellMafia/PowerSploit.git &&\
    git clone --recurse https://gitlab.com/kalilinux/packages/dirbuster.git &&\
    git clone --recurse https://github.com/GhostPack/Seatbelt.git &&\
    git clone --recurse https://github.com/tennc/webshell.git

WORKDIR /

RUN go get -u github.com/jaeles-project/gospider

EXPOSE 22
EXPOSE 8080
EXPOSE 8081

CMD ["while", "true;", "do", "sleep", "5;", "done"]
