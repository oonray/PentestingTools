FROM kalilinux/kali-rolling:latest

RUN apt-get update
RUN apt-get install -y nmap netcat git neovim nginx curl wget golang gcc g++ apt-transport-https python3 python3-pip
RUN apt-get install -y zsh zsh-syntax-highlighting zsh-autosuggestions
RUN apt-get install -y exploitdb radare2 gobuster ffuf smbmap sqlmap crackmapexec
RUN apt-get install -y powershell-empire metasploit-framework shellter veil unicorn-magic impacket-scripts python2 wordlists mono-devel

RUN cp /etc/skel/.zshrc /root/
RUN chsh -s /bin/zsh

RUN mkdir /opt/git
WORKDIR /opt/git
RUN git clone --recurse https://github.com/samratashok/nishang.git  &&\
    git clone --recurse https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite  && \
    git clone --recurse https://github.com/SecureAuthCorp/impacket.git &&\
    git clone --recurse https://github.com/bats3c/shad0w.git &&\
    git clone --recurse https://github.com/danielmiessler/SecLists.git &&\
    git clone --recurse https://github.com/lgandx/Responder.git &&\
    git clone --recurse https://github.com/sherlock-project/sherlock.git &&\
    git clone --recurse https://github.com/PowerShellMafia/PowerSploit.git &&\
    git clone --recurse https://gitlab.com/kalilinux/packages/dirbuster.git &&\
    git clone --recurse https://github.com/GhostPack/Seatbelt.git &&\
    git clone --recurse https://github.com/tennc/webshell.git &&\
    git clone --recurse https://github.com/cobbr/Covenant

WORKDIR /tmp
RUN wget https://packages.microsoft.com/config/debian/10/packages-microsoft-prod.deb -O packages-microsoft-prod.deb && dpkg -i packages-microsoft-prod.deb
RUN apt-get update &&\
    apt-get install -y dotnet-sdk-5.0

WORKDIR /

RUN go get -u github.com/jaeles-project/gospider

EXPOSE 22
EXPOSE 8080
EXPOSE 8081

CMD ["while", "true;", "do", "sleep", "5;", "done"]
