FROM kalilinux/kali-rolling:latest
RUN apt-get update
RUN apt-get install -y nmap netcat git neovim nginx curl wget exploitdb golang gcc g++ radare2 gobuster ffuf smbmap powershell-empire metasploit-framework shellter veil unicorn-magic zsh  zsh-syntax-highlighting zsh-autosuggestions apt-transport-https crackmapexec  impacket-scripts python3 python3-pip openssh-server

WORKDIR /tmp
RUN wget https://packages.microsoft.com/config/debian/10/packages-microsoft-prod.deb -O packages-microsoft-prod.deb &&\
    sudo dpkg -i packages-microsoft-prod.deb

RUN apt-get update
RUN apt-get install -y dotnet-sdk-5.0  dotnet-sdk-3.1 mono-devel
WORKDIR /

RUN cp /etc/skel/.zshrc /root/
RUN chsh -s /bin/zsh

RUN mkdir /opt/git
WORKDIR /opt/git
RUN git clone https://github.com/samratashok/nishang.git  &&\
    git clone https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite  && \
    git clone --recurse-submodules https://github.com/cobbr/Covenant &&\
    git clone --recurse https://github.com/SecureAuthCorp/impacket.git &&\
    git clone --recurse-submodules https://github.com/bats3c/shad0w.git

WORKDIR /

EXPOSE 22
EXPOSE 8080
EXPOSE 8081

CMD ["while", "true;", "do", "sleep", "5;", "done"]
